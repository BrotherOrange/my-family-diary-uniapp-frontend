{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../../HBuilderX.4.75.2025071105/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <!-- Loading State -->\r\n    <view class=\"form-section\" v-if=\"pageLoading\">\r\n      <view class=\"loading-state\">\r\n        <text>正在初始化...</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Login Form -->\r\n    <view class=\"form-section\" v-else>\r\n      <!-- Error State -->\r\n      <view v-if=\"initError\" class=\"error-state\">\r\n        <text class=\"error-text\">{{ initError }}</text>\r\n        <button class=\"retry-btn\" @tap=\"initWeChatLogin\">重试</button>\r\n      </view>\r\n\r\n      <!-- 老用户登录 -->\r\n      <view v-else-if=\"existingUser\" class=\"password-form\">\r\n        <!-- 显示用户头像和昵称 -->\r\n        <view class=\"user-info-section\">\r\n          <image\r\n            class=\"user-avatar\"\r\n            :src=\"existingUser.avatarUrl || '/static/logo.png'\"\r\n            mode=\"aspectFill\"\r\n          ></image>\r\n          <text class=\"user-name\">{{ existingUser.username }}</text>\r\n          <text class=\"welcome-text\">欢迎回来</text>\r\n        </view>\r\n\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">密码</text>\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"text\"\r\n            :password=\"true\"\r\n            v-model=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            maxlength=\"30\"\r\n          />\r\n        </view>\r\n\r\n        <button class=\"submit-btn\" :loading=\"loading\" @tap=\"handleLogin\">\r\n          登录\r\n        </button>\r\n      </view>\r\n\r\n      <!-- 新用户注册 -->\r\n      <view v-else class=\"password-form\">\r\n        <view class=\"register-title\">\r\n          <text class=\"title-text\">新用户注册</text>\r\n          <text class=\"title-desc\">完善信息开始使用</text>\r\n        </view>\r\n\r\n        <!-- Avatar Section -->\r\n        <view class=\"avatar-section\">\r\n          <!-- #ifdef MP-WEIXIN -->\r\n          <button\r\n            class=\"avatar-btn\"\r\n            open-type=\"chooseAvatar\"\r\n            @chooseavatar=\"onChooseAvatar\"\r\n          >\r\n            <image\r\n              class=\"avatar-preview\"\r\n              :src=\"avatarUrl || '/static/logo.png'\"\r\n              mode=\"aspectFill\"\r\n            ></image>\r\n            <view class=\"avatar-edit-icon\">\r\n              <text>+</text>\r\n            </view>\r\n          </button>\r\n          <!-- #endif -->\r\n          <!-- #ifndef MP-WEIXIN -->\r\n          <view class=\"avatar-wrapper\" @tap=\"chooseLocalImage\">\r\n            <image\r\n              class=\"avatar-preview\"\r\n              :src=\"avatarUrl || '/static/logo.png'\"\r\n              mode=\"aspectFill\"\r\n            ></image>\r\n            <view class=\"avatar-edit-icon\">\r\n              <text>+</text>\r\n            </view>\r\n          </view>\r\n          <!-- #endif -->\r\n          <text class=\"avatar-hint\">点击选择头像</text>\r\n        </view>\r\n\r\n        <!-- Username -->\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">用户名</text>\r\n          <!-- #ifdef MP-WEIXIN -->\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"nickname\"\r\n            v-model=\"username\"\r\n            placeholder=\"请输入昵称（点击可选微信昵称）\"\r\n            maxlength=\"20\"\r\n            @blur=\"onNicknameBlur\"\r\n          />\r\n          <!-- #endif -->\r\n          <!-- #ifndef MP-WEIXIN -->\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"text\"\r\n            v-model=\"username\"\r\n            placeholder=\"请输入用户名\"\r\n            maxlength=\"20\"\r\n          />\r\n          <!-- #endif -->\r\n        </view>\r\n\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">手机号</text>\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"number\"\r\n            v-model=\"phone\"\r\n            placeholder=\"请输入手机号\"\r\n            maxlength=\"11\"\r\n          />\r\n        </view>\r\n\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">生日</text>\r\n          <picker mode=\"date\" :value=\"birthday\" :end=\"today\" @change=\"onBirthdayChange\">\r\n            <view class=\"input-field picker-field\">\r\n              <text :class=\"{ placeholder: !birthday }\">\r\n                {{ birthday || '请选择生日' }}\r\n              </text>\r\n            </view>\r\n          </picker>\r\n        </view>\r\n\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">密码</text>\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"text\"\r\n            :password=\"true\"\r\n            v-model=\"password\"\r\n            placeholder=\"请输入密码（8-30位）\"\r\n            maxlength=\"30\"\r\n          />\r\n        </view>\r\n\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">确认密码</text>\r\n          <input\r\n            class=\"input-field\"\r\n            type=\"text\"\r\n            :password=\"true\"\r\n            v-model=\"confirmPassword\"\r\n            placeholder=\"请再次输入密码\"\r\n            maxlength=\"30\"\r\n          />\r\n        </view>\r\n\r\n        <button class=\"submit-btn\" :loading=\"loading\" @tap=\"handleRegister\">\r\n          注册\r\n        </button>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { login, register, code2Session, checkUserExists } from '@/api/auth'\r\n\r\n// 响应式状态\r\nconst openId = ref('')\r\nconst password = ref('')\r\nconst confirmPassword = ref('')\r\nconst username = ref('')\r\nconst phone = ref('')\r\nconst birthday = ref('')\r\nconst avatarUrl = ref('')\r\nconst existingUser = ref(null) // 已注册用户信息 { username, avatarUrl }\r\nconst loading = ref(false)\r\nconst pageLoading = ref(true)\r\nconst initError = ref('')\r\n\r\n// 计算属性\r\nconst today = computed(() => {\r\n  const date = new Date()\r\n  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\r\n})\r\n\r\n// 页面加载\r\nonLoad(() => {\r\n  const token = uni.getStorageSync('token')\r\n  if (token) {\r\n    navigateToHome()\r\n    return\r\n  }\r\n  initWeChatLogin()\r\n})\r\n\r\n// Initialize WeChat login (silent)\r\nfunction initWeChatLogin() {\r\n  pageLoading.value = true\r\n  initError.value = ''\r\n  existingUser.value = null\r\n\r\n  // #ifdef MP-WEIXIN\r\n  uni.login({\r\n    provider: 'weixin',\r\n    success: async (loginRes) => {\r\n      console.log('uni.login success, code:', loginRes.code)\r\n      try {\r\n        // 1. 获取 openId\r\n        const sessionRes = await code2Session(loginRes.code)\r\n        console.log('code2Session response:', sessionRes)\r\n        openId.value = sessionRes.data.openId\r\n\r\n        // 2. 检查用户是否已注册\r\n        const checkRes = await checkUserExists(openId.value)\r\n        console.log('checkUserExists response:', checkRes)\r\n\r\n        if (checkRes.data.registered) {\r\n          // 老用户，显示头像和昵称\r\n          existingUser.value = {\r\n            username: checkRes.data.username,\r\n            avatarUrl: checkRes.data.avatarUrl\r\n          }\r\n        }\r\n        // 新用户，existingUser 保持 null，显示注册表单\r\n\r\n        pageLoading.value = false\r\n      } catch (err) {\r\n        console.error('初始化失败:', err)\r\n        initError.value = '初始化失败，请重试'\r\n        pageLoading.value = false\r\n      }\r\n    },\r\n    fail: (err) => {\r\n      console.error('uni.login fail:', err)\r\n      initError.value = '微信登录失败，请重试'\r\n      pageLoading.value = false\r\n    }\r\n  })\r\n  // #endif\r\n\r\n  // #ifdef H5\r\n  setTimeout(async () => {\r\n    openId.value = 'test_open_id_h5'\r\n    try {\r\n      const checkRes = await checkUserExists(openId.value)\r\n      if (checkRes.data.registered) {\r\n        existingUser.value = {\r\n          username: checkRes.data.username,\r\n          avatarUrl: checkRes.data.avatarUrl\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log('H5 check user failed, showing register form')\r\n    }\r\n    pageLoading.value = false\r\n  }, 500)\r\n  // #endif\r\n}\r\n\r\n// 微信头像选择回调（新API）\r\nfunction onChooseAvatar(e) {\r\n  console.log('onChooseAvatar:', e.detail)\r\n  avatarUrl.value = e.detail.avatarUrl\r\n}\r\n\r\n// 昵称输入框失焦回调\r\nfunction onNicknameBlur(e) {\r\n  console.log('onNicknameBlur:', e.detail)\r\n  // 昵称会自动填入 v-model\r\n}\r\n\r\n// 非微信环境选择本地图片\r\nfunction chooseLocalImage() {\r\n  uni.chooseImage({\r\n    count: 1,\r\n    sizeType: ['compressed'],\r\n    sourceType: ['album', 'camera'],\r\n    success: (res) => {\r\n      console.log('chooseImage success:', res)\r\n      avatarUrl.value = res.tempFilePaths[0]\r\n    }\r\n  })\r\n}\r\n\r\n// Handle birthday picker change\r\nfunction onBirthdayChange(e) {\r\n  birthday.value = e.detail.value\r\n}\r\n\r\n// Validate phone number\r\nfunction isValidPhone(phoneNum) {\r\n  return /^1[3-9]\\d{9}$/.test(phoneNum)\r\n}\r\n\r\n// 老用户登录\r\nasync function handleLogin() {\r\n  if (!password.value) {\r\n    uni.showToast({ title: '请输入密码', icon: 'none' })\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    const res = await login(openId.value, password.value)\r\n    uni.setStorageSync('token', res.data.token)\r\n    // 保存用户信息（后端已返回 openId 和 avatarUrl）\r\n    uni.setStorageSync('userInfo', res.data)\r\n    uni.showToast({ title: '登录成功', icon: 'success' })\r\n    setTimeout(() => {\r\n      navigateToHome()\r\n    }, 1500)\r\n  } catch (err) {\r\n    console.error('登录失败:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 新用户注册\r\nasync function handleRegister() {\r\n  // 表单验证\r\n  if (!username.value) {\r\n    uni.showToast({ title: '请输入用户名', icon: 'none' })\r\n    return\r\n  }\r\n  if (!phone.value) {\r\n    uni.showToast({ title: '请输入手机号', icon: 'none' })\r\n    return\r\n  }\r\n  if (!isValidPhone(phone.value)) {\r\n    uni.showToast({ title: '请输入正确的手机号', icon: 'none' })\r\n    return\r\n  }\r\n  if (!birthday.value) {\r\n    uni.showToast({ title: '请选择生日', icon: 'none' })\r\n    return\r\n  }\r\n  if (!password.value) {\r\n    uni.showToast({ title: '请输入密码', icon: 'none' })\r\n    return\r\n  }\r\n  if (password.value.length < 8 || password.value.length > 30) {\r\n    uni.showToast({ title: '密码长度需要8-30位', icon: 'none' })\r\n    return\r\n  }\r\n  if (password.value !== confirmPassword.value) {\r\n    uni.showToast({ title: '两次密码输入不一致', icon: 'none' })\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    await register({\r\n      openId: openId.value,\r\n      username: username.value,\r\n      password: password.value,\r\n      phone: phone.value,\r\n      birthday: birthday.value\r\n    })\r\n    uni.showToast({ title: '注册成功', icon: 'success' })\r\n\r\n    // 注册成功后，设置为老用户状态，等待输入密码登录\r\n    existingUser.value = {\r\n      username: username.value,\r\n      avatarUrl: avatarUrl.value\r\n    }\r\n    password.value = ''\r\n  } catch (err) {\r\n    console.error('注册失败:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// Navigate to home page\r\nfunction navigateToHome() {\r\n  uni.switchTab({ url: '/pages/home/home' })\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n  min-height: 100vh;\r\n  padding: 40rpx;\r\n  background: #FFE8E0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.form-section {\r\n  background: #FFEDE8;\r\n  border-radius: 30rpx;\r\n  padding: 40rpx;\r\n  box-shadow: 0 10rpx 40rpx rgba(255, 154, 139, 0.15);\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 100rpx 0;\r\n  color: #666666;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 60rpx 0;\r\n\r\n  .error-text {\r\n    color: #FF6B6B;\r\n    font-size: 28rpx;\r\n    margin-bottom: 30rpx;\r\n  }\r\n}\r\n\r\n.retry-btn {\r\n  background: #FF9A8B;\r\n  color: #ffffff;\r\n  font-size: 28rpx;\r\n  padding: 20rpx 60rpx;\r\n  border-radius: 16rpx;\r\n  border: none;\r\n\r\n  &::after {\r\n    border: none;\r\n  }\r\n}\r\n\r\n/* User Info Section (老用户登录) */\r\n.user-info-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 40rpx;\r\n\r\n  .user-avatar {\r\n    width: 160rpx;\r\n    height: 160rpx;\r\n    border-radius: 50%;\r\n    border: 4rpx solid #FFE0D9;\r\n    margin-bottom: 20rpx;\r\n  }\r\n\r\n  .user-name {\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    color: #333333;\r\n    margin-bottom: 8rpx;\r\n  }\r\n\r\n  .welcome-text {\r\n    font-size: 26rpx;\r\n    color: #999999;\r\n  }\r\n}\r\n\r\n/* Register Title (新用户注册) */\r\n.register-title {\r\n  text-align: center;\r\n  margin-bottom: 30rpx;\r\n\r\n  .title-text {\r\n    display: block;\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    color: #333333;\r\n    margin-bottom: 8rpx;\r\n  }\r\n\r\n  .title-desc {\r\n    font-size: 26rpx;\r\n    color: #999999;\r\n  }\r\n}\r\n\r\n/* Avatar Section */\r\n.avatar-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 30rpx;\r\n\r\n  .avatar-hint {\r\n    margin-top: 12rpx;\r\n    font-size: 24rpx;\r\n    color: #999999;\r\n  }\r\n}\r\n\r\n.avatar-btn {\r\n  position: relative;\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  padding: 0;\r\n  margin: 0;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 50%;\r\n  overflow: visible;\r\n\r\n  &::after {\r\n    border: none;\r\n  }\r\n}\r\n\r\n.avatar-wrapper {\r\n  position: relative;\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n}\r\n\r\n.avatar-preview {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 50%;\r\n  border: 4rpx solid #FFE0D9;\r\n}\r\n\r\n.avatar-edit-icon {\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  background: #FF9A8B;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  text {\r\n    color: #ffffff;\r\n    font-size: 28rpx;\r\n    font-weight: bold;\r\n  }\r\n}\r\n\r\n/* Input Group */\r\n.input-group {\r\n  margin-bottom: 24rpx;\r\n\r\n  .input-label {\r\n    display: block;\r\n    font-size: 26rpx;\r\n    color: #666666;\r\n    margin-bottom: 12rpx;\r\n  }\r\n}\r\n\r\n.input-field {\r\n  width: 100%;\r\n  height: 84rpx;\r\n  padding: 0 24rpx;\r\n  border: 2rpx solid #FFD4C9;\r\n  border-radius: 16rpx;\r\n  font-size: 28rpx;\r\n  box-sizing: border-box;\r\n  background: #FFF8F5;\r\n\r\n  &:focus {\r\n    border-color: #FF9A8B;\r\n  }\r\n}\r\n\r\n.picker-field {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #FFF8F5;\r\n\r\n  .placeholder {\r\n    color: #999999;\r\n  }\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background: #FF9A8B;\r\n  color: #ffffff;\r\n  font-size: 32rpx;\r\n  border-radius: 20rpx;\r\n  border: none;\r\n  margin-top: 16rpx;\r\n\r\n  &::after {\r\n    border: none;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/my-family-diary/my-family-diary-uniapp-frontend/MyFamilyDiary/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni","code2Session","checkUserExists","login","register"],"mappings":"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"}